<h1 id="create-cpp-definition"><a aria-hidden="true" class="anchor-heading" href="#create-cpp-definition"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Create Cpp Definition</h1>
<pre><code>javac -h . ApplyWeights.java
</code></pre>
<p>It will auto generate <code>ApplyWeights.class</code> and <code>ApplyWeights.h</code></p>
<blockquote>
<p>ApplyWeights.h</p>
</blockquote>
<pre><code>/* DO NOT EDIT THIS FILE - it is machine generated */
#include &#x3C;jni.h>
/* Header for class ApplyWeights */

#ifndef _Included_ApplyWeights
#define _Included_ApplyWeights
#ifdef __cplusplus
extern "C" {
#endif
/*
 * Class:     ApplyWeights
 * Method:    applyWeights
 * Signature: ([F)V
 */
JNIEXPORT void JNICALL Java_ApplyWeights_applyWeights
  (JNIEnv *, jobject, jfloatArray);

#ifdef __cplusplus
}
#endif
#endif
</code></pre>
<p>Fill in the argument name and finish the cpp counterpart</p>
<pre><code>JNIEXPORT void JNICALL Java_ApplyWeights_applyWeights
  (JNIEnv* env, jobject, jfloatArray weights_);
</code></pre>
<pre><code>#include "ApplyWeights.h"
#include &#x3C;ostream>
#include &#x3C;iostream>

void applyWeightsNested(float const* weights, size_t count) noexcept {
  std::cout &#x3C;&#x3C; "Weight 0: " &#x3C;&#x3C; weights[0] &#x3C;&#x3C; std::endl;
  std::cout &#x3C;&#x3C; "Weight 4: " &#x3C;&#x3C; weights[4] &#x3C;&#x3C; std::endl;
}

void applyWeights(float const* weights, size_t count) noexcept {
  applyWeightsNested(weights, count);
}

JNIEXPORT void JNICALL Java_ApplyWeights_applyWeights
  (JNIEnv* env, jobject, jfloatArray weights_) {
    std::cout &#x3C;&#x3C; "Initializing..." &#x3C;&#x3C; std::endl;
    jfloat* weights = env->GetFloatArrayElements(weights_, NULL);
    jsize size = env->GetArrayLength(weights_);
    applyWeights(weights, size);
    env->ReleaseFloatArrayElements(weights_, weights, 0);
}
</code></pre>